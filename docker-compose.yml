services:
  mcp-server:
    build: 
      context: .
      dockerfile: Dockerfile
    image: mcp-code-exec:latest
    container_name: mcp-code-exec
    
    # Map port 8000 inside the container to 8000 on your host
    ports:
      - "8000:8000"

    # Environment variables for configuration
    # environment:
    #   - TIMEOUT=10
      
    # Security Hardening: Drop all Linux capabilities and only add back what's needed.
    # Since we are just running Python code, we rarely need advanced OS privs.
    cap_drop:
      - ALL
    
    # Prevent the container from gaining new privileges
    security_opt:
      - no-new-privileges:true


    # Optional: Mount the source code for easier development/debugging without rebuilding.
    # (Uncomment the lines below if you are actively editing the python files)
    # volumes:
    #   - ./server.py:/app/server.py
    #   - ./engine:/app/engine
    
    # Restart policy
    restart: unless-stopped